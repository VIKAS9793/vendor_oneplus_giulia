# ----------------------------------------------
# Test name: 	SN1X0_SPC
# Description:	runs SPC
# Revision:		2.00
# Date:			28/02/2020
# Tool rev:		1.12 or later
# ----------------------------------------------

version
interval 200
reset 1

// NCI CORE RESET CMD
send 20000100
receive
// NCI CORE INIT CMD
send 2001020000
// NCI CORE SETCONFIG CMD:
send 20020401850101
// NCI SYSTEM ENABLE PROPRIETARY CMD
send 2F0200
//#Set Power mode to Idle
//send 2F000100



//#RF_CLOCKSetting
send 20030301A011

// Set Clock (if clock-less --> "0180")
//send 20020B01A0110701803201C80000

//#Read Customer Phase before SPC
send 20030301A017

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//SPC CMD for CALIBRATION

//SET SPC FIRST STEP --> SPC CALIBRATION for 19.2MHz
//send 2F3D2230000831000334000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 26MHz
//send 2F3D223000E9300C0333000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 38.4MHz
send 2F3D223000D830000335000000000200000A14000000000000000000000000000000000000

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

//COPY SPC CMD BLKO (2F3D223000XXXXX) according to the Input Clock used HERE (from SPC Excel file)
//send 2F3D223000D830000...

//SPC CMD [PLL sweep] input clock 19.2MHz
//#Set SPC configuration Block1
//send 2F3D7E3001408D0366408D0266408D0166408D0066808D0466808D0366808D0266808D0166808D0066C08D0466C08D0366C08D0266C08D0166C08D0066008E0466008E0366008E0266008E0166008E0066408E0466408E0366408E0266408E0166408E0066808E0466808E0366808E0266808E0166808E0066C08E0466C08E0366
//sleep 100
//#Set SPC configuration Block2
//send 2F3D563002C08E0266C08E0166C08E0066008F0466008F0366008F0266008F0166008F0066408F0466408F0366408F0266408F0166408F0066808F0466808F0366808F0266808F0166808F0066C08F0466C08F0366C08F0266
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E3003C08F0166C08F0066009004660090036600900266009001660090006640900466409003664090026640900166409000668090046680900366809002668090016680900066C0900466C0900366
//sleep 100


//SPC CMD [PLL sweep] input clock HFO (22.5MHz)
//#Set SPC configuration Block1
//send 2F3D7E3001C3D5037203D6017283D60472C3D6027203D7007283D70372C3D7017243D8047283D80272C3D8007243D9037283D9017203DA047243DA027283DA007203DB037243DB0172C3DB047203DC027243DC0072C3DC037203DD017283DD0472C3DD027203DE007283DE0372C3DE017243DF047283DF0272C3DF007243E00372
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300283E0017203E1047243E1027283E1007203E2037243E20172C3E2047203E3027243E30072C3E3037203E4017283E40472C3E4027203E5007283E50372C3E5017243E6047283E60272C3E6007243E7037283E7017203E8047243E8027283E8007203E9037243E90172C3E9047203EA027243EA0072C3EA037203EB0172
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300383EB0472C3EB027203EC007283EC0372C3EC017243ED047283ED0272C3ED007243EE037283EE017203EF047243EF027283EF007203F0037243F00172C3F0047280900066C0900466C0900366
//sleep 100



//SPC CMD [PLL sweep] input clock 26MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C2A60462C2A6016202A7036202A7006242A7026282A7046282A70162C2A70362C2A7006202A8026242A8046242A8016282A8036282A80062C2A8026202A9046202A9016242A9036242A9006282A90262C2A90462C2A9016202AA036202AA006242AA026282AA046282AA0162C2AA0362C2AA006202AB026242AB0462
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300242AB016282AB036282AB0062C2AB026202AC046202AC016242AC036242AC006282AC0262C2AC0462C2AC016202AD036202AD006242AD026282AD046282AD0162C2AD0362C2AD006202AE026242AE0462
//sleep 100



//SPC CMD [PLL sweep] input clock 27.12MHz
//#Set SPC configuration Block1
//send 2F3D7E300183A30266C3A30466C3A3016603A4036603A4006643A4026683A4046683A40166C3A40366C3A4006603A5026643A5046643A5016683A5036683A50066C3A5026603A6046603A6016643A6036643A6006683A60266C3A60466C3A6016603A7036603A7006643A7026683A7046683A70166C3A70366C3A7006603A80266
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300243A8046643A8016683A8036683A80066C3A8026603A9046603A9016643A9036643A9006683A90266C3A90466C3A9016603AA036603AA006643AA026683AA046683AA0166C3AA0366C3AA006603AB026643AB046643AB016683AB036683AB0066C3AB026603AC046603AC016643AC036643AC006683AC0266C3AC0466
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E3003C3AC016603AD036603AD006643AD026683AD046683AD0166C3AD0366C3AD006603AE026643AE046643AE016683AE036683AE0066C3AE026603AF046603AF016643AF036643AF006683AF0266
//sleep 100


//SPC CMD [PLL sweep] input clock 32MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C3BB006203BC006243BC006283BC0062C3BC006203BD006243BD006283BD0062C3BD006203BE006243BE006283BE0062C3BE006203BF006243BF006283BF0062C3BF006203C0006243C0006283C00062C3C0006203C1006243C1006283C10062C3C1006203C2006243C2006283C20062C3C2006203C3006243C30062
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300283C30062C3C3006203C4006243C4006283C40062C3C4006203C5006243C5006283C50062C3C5006203C6006243C6006283C60062C3C6006203C7006243C7006283C70062C3C7006203C8006243C8006283C80062C3C8006203C9006243C9006283C90062C3C9006203CA006243CA006283CA0062C3CA006203CB0062
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300343CB006283CB0062C3CB006203CC006243CC006283CC0062C3CC006203CD006243CD006283CD0062C3CD006203CE006243CE006283CE0062C3CE006203CF006243CF006283CF0062C3CF0062
//sleep 100


//SPC CMD [PLL sweep] input clock 38.4MHz
//#Set SPC configuration Block1
send 2F3D7E3001418D0466418D0366418D0266418D0166418D0066818D0466818D0366818D0266818D0166818D0066C18D0466C18D0366C18D0266C18D0166C18D0066018E0466018E0366018E0266018E0166018E0066418E0466418E0366418E0266418E0166418E0066818E0466818E0366818E0266818E0166818E0066C18E0466
sleep 100
//#Set SPC configuration Block2
send 2F3D5A3002C18E0366C18E0266C18E0166C18E0066018F0466018F0366018F0266018F0166018F0066418F0466418F0366418F0266418F0166418F0066818F0466818F0366818F0266818F0166818F0066C18F0466C18F0366C18F0266
sleep 100



//SPC CMD [PLL sweep] input clock 48MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C3A80362C3A8006203A9026243A9046243A9016283A9036283A90062C3A9026203AA046203AA016243AA036243AA006283AA0262C3AA0462C3AA016203AB036203AB006243AB026283AB046283AB0162C3AB0362C3AB006203AC026243AC046243AC016283AC036283AC0062C3AC026203AD046203AD016243AD0362
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300243AD006283AD0262C3AD0462C3AD016203AE036203AE006243AE026283AE046283AE0162C3AE0362C3AE006203AF026243AF046243AF016283AF036283AF0062C3AF026203B0046203B0016243B0036243B0006283B00262C3B00462C3B0016203B1036203B1006243B1026283B1046283B10162C3B10362C3B10062
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300303B2026243B2046243B2016283B2036283B20062C3B2026203B3046203B3016243B3036243B3006283B30262C3B30462C3B3016203B4036203B4006243B4026283B4046283B40162C3B40362
//sleep 100


//#Start SPC Algorithm
send 2F3D0131
trigger 6F3D07

sleep 12000

#SET LPCD
send 20022E01A0682A064060031900000000830400C009C00900010001A000A00003FA0000004C0014007D00057F0000010003

//Reset SPC
send 20020601A017020000

//#Read Customer Phase after SPC
send 20030301A017
receive

